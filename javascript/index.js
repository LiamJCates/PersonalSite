var v=new Array([28,216,210],[147,237,199],[237,66,100],[255,237,188],[220,36,36],[74,86,157],[252,53,76],[10,191,188],[248,87,166],[255,88,88],[229,93,135],[95,195,228]);var d=0;var w=[0,1,2,3];var M=.01;function t(){var t=v[w[0]];var i=v[w[1]];var n=v[w[2]];var s=v[w[3]];var h=1-d;var e=Math.round(h*t[0]+d*i[0]);var r=Math.round(h*t[1]+d*i[1]);var o=Math.round(h*t[2]+d*i[2]);var u="#"+(e<<16|r<<8|o).toString(16);var a=Math.round(h*n[0]+d*s[0]);var c=Math.round(h*n[1]+d*s[1]);var f=Math.round(h*n[2]+d*s[2]);var l="#"+(a<<16|c<<8|f).toString(16);$(".first").t({background:"-webkit-gradient(linear, left top, right top, from("+u+"), to("+l+"))"}).t({background:"-moz-linear-gradient(left, "+u+" 0%, "+l+" 100%)"}).t({"-webkit-text-fill-color":"transparent","-webkit-background-clip":"text"});d+=M;if(d>=1){d%=1;w[0]=w[1];w[2]=w[3];w[1]=(w[1]+Math.floor(1+Math.random()*(v.length-1)))%v.length;w[3]=(w[3]+Math.floor(1+Math.random()*(v.length-1)))%v.length}}setInterval(t,10);var i=function(h){"use strict";var e=this;e.init=function(){e.i="&#*+%?ยฃ@ยง$";e.message=0;e.s=0;e.h=false;e.o=["Using machines to help people","Software Engineer","Security Enthusiast","Cybercitizen"];setTimeout(e.u,100)};e.l=function(t){var i="";while(i.length<t){i+=e.i.charAt(Math.floor(Math.random()*e.i.length))}return i};e.u=function(){if(e.s<e.o[e.message].length){e.s=e.s+2;if(e.s>e.o[e.message].length){e.s=e.o[e.message].length}var t=e.l(e.s);$(h).v(t);setTimeout(e.u,20)}else{setTimeout(e.M,20)}};e.M=function(){if(e.h===false){e.h=[];for(var t=0;t<e.o[e.message].length;t++){e.h.push({c:Math.floor(Math.random()*12)+1,m:e.o[e.message].charAt(t)})}}var i=false;var n="";for(var t=0;t<e.h.length;t++){var s=e.h[t];if(s.c>0){i=true;s.c--;n+=e.i.charAt(Math.floor(Math.random()*e.i.length))}else{n+=s.m}}$(h).v(n);if(i===true){setTimeout(e.M,50)}else{setTimeout(e.p,2e3)}};e.p=function(){e.message=e.message+1;if(e.message>=e.o.length){e.message=0}e.s=0;e.h=false;$(h).v("");setTimeout(e.u,200)};e.init()};var n=new i(document.getElementById("messenger"));"use strict";var Dt=Dt||{g:"56"};Dt.extend=function(t,i){if(Object.keys)for(var n=Object.keys(i),s=0,h=n.length;s<h;s++){var e=n[s];Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}else for(e in n={}.hasOwnProperty,i)n.call(i,e)&&(t[e]=i[e]);return t};Dt.k=0;Dt.A=1;Dt.T=2;Dt.P=1;Dt.S=2;Dt.V=1;Dt.R=1;Dt.I=2;Dt.D=3;Dt.C=100;Dt.X=204;Dt.Y=205;Dt.Z=1e3;Dt.j=1001;Dt.F=1006;Dt.q=1008;Dt.O=1009;Dt.U=1010;Dt.B=1021;Dt.H=function(t){void 0!==t&&this.set(t);return this};Dt.extend(Dt.H.prototype,{r:1,L:1,b:1,set:function(t){switch(typeof t){case"number":this.$(t);break;case"string":this.G(t)}},$:function(t){t=Math.floor(t);this.r=(t>>16&255)/255;this.L=(t>>8&255)/255;this.b=(t&255)/255;return this},N:function(t,i,n){this.r=t;this.L=i;this.b=n;return this},W:function(t,i,n){console.log("DEPRECATED: Color's .setHSV() will be removed. Use .setHSL( h, s, l ) instead.");return this.J(t,i*n/(1>(t=(2-i)*n)?t:2-t),t/2)},J:function(t,i,n){if(0===i)this.r=this.L=this.b=n;else{var s=function(t,i,n){0>n&&(n+=1);1<n&&(n-=1);return n<1/6?t+6*(i-t)*n:.5>n?i:n<2/3?t+6*(i-t)*(2/3-n):t},i=.5>=n?n*(1+i):n+i-n*i,n=2*n-i;this.r=s(n,i,t+1/3);this.L=s(n,i,t);this.b=s(n,i,t-1/3)}return this},G:function(t){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(t))return t=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(t),this.r=Math.min(255,parseInt(t[1],10))/255,this.L=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this;if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(t))return t=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(t),this.r=Math.min(100,parseInt(t[1],10))/100,this.L=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(t))return t=/^\#([0-9a-f]{6})$/i.exec(t),this.$(parseInt(t[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t))return t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t),this.$(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this;if(/^(\w+)$/i.test(t))return this.$(Dt.K[t]),this},_:function(t){this.r=t.r;this.L=t.L;this.b=t.b;return this},tt:function(t){this.r=t.r*t.r;this.L=t.L*t.L;this.b=t.b*t.b;return this},it:function(t){this.r=Math.sqrt(t.r);this.L=Math.sqrt(t.L);this.b=Math.sqrt(t.b);return this},nt:function(){var t=this.r,i=this.L,n=this.b;this.r=t*t;this.L=i*i;this.b=n*n;return this},st:function(){this.r=Math.sqrt(this.r);this.L=Math.sqrt(this.L);this.b=Math.sqrt(this.b);return this},ht:function(){return 255*this.r<<16^255*this.L<<8^255*this.b<<0},et:function(){return("000000"+this.ht().toString(16)).slice(-6)},rt:function(){var u={ot:0,ut:0,m:0};return function(){var t=this.r,i=this.L,n=this.b,s=Math.max(t,i,n),h=Math.min(t,i,n),e,r=(h+s)/2;if(h===s)h=e=0;else{var o=s-h,h=.5>=r?o/(s+h):o/(2-s-h);switch(s){case t:e=(i-n)/o+(i<n?6:0);break;case i:e=(n-t)/o+2;break;case n:e=(t-i)/o+4}e/=6}u.ot=e;u.ut=h;u.m=r;return u}}(),at:function(){return"rgb("+(255*this.r|0)+","+(255*this.L|0)+","+(255*this.b|0)+")"},ct:function(t,i,n){var s=this.rt();s.ot+=t;s.ut+=i;s.m+=n;this.J(s.ot,s.ut,s.m);return this},add:function(t){this.r+=t.r;this.L+=t.L;this.b+=t.b;return this},ft:function(t,i){this.r=t.r+i.r;this.L=t.L+i.L;this.b=t.b+i.b;return this},lt:function(t){this.r+=t;this.L+=t;this.b+=t;return this},multiply:function(t){this.r*=t.r;this.L*=t.L;this.b*=t.b;return this},vt:function(t){this.r*=t;this.L*=t;this.b*=t;return this},dt:function(t,i){this.r+=(t.r-this.r)*i;this.L+=(t.L-this.L)*i;this.b+=(t.b-this.b)*i;return this},clone:function(){return(new Dt.H).N(this.r,this.L,this.b)}});Dt.K={wt:15792383,Mt:16444375,pt:65535,gt:8388564,yt:15794175,bt:16119260,Et:16770244,xt:0,kt:16772045,blue:255,At:9055202,Tt:10824234,Pt:14596231,St:6266528,Vt:8388352,Rt:13789470,It:16744272,Dt:6591981,Ct:16775388,Xt:14423100,Yt:65535,Zt:139,jt:35723,Ft:12092939,qt:11119017,Ot:25600,Ut:11119017,Bt:12433259,Ht:9109643,Lt:5597999,$t:16747520,zt:10040012,Qt:9109504,Gt:15308410,Nt:9419919,Wt:4734347,Jt:3100495,Kt:3100495,_t:52945,ti:9699539,ii:16716947,ni:49151,si:6908265,hi:6908265,ei:2003199,ri:11674146,oi:16775920,ui:2263842,ai:16711935,ci:14474460,fi:16316671,li:16766720,vi:14329120,di:8421504,green:32768,wi:11403055,Mi:8421504,mi:15794160,pi:16738740,gi:13458524,yi:4915330,bi:16777200,Ei:15787660,xi:15132410,ki:16773365,Ai:8190976,Ti:16775885,Pi:11393254,Si:15761536,Vi:14745599,Ri:16448210,Ii:13882323,Di:9498256,Ci:13882323,Xi:16758465,Yi:16752762,Zi:2142890,ji:8900346,Fi:7833753,qi:7833753,Oi:11584734,Ui:16777184,Bi:65280,Hi:3329330,Li:16445670,$i:16711935,zi:8388608,Qi:6737322,Gi:205,Ni:12211667,Wi:9662683,Ji:3978097,Ki:8087790,_i:64154,tn:4772300,"in":13047173,nn:1644912,sn:16121850,hn:16770273,en:16770229,rn:16768685,on:128,un:16643558,an:8421376,cn:7048739,fn:16753920,ln:16729344,vn:14315734,dn:15657130,wn:10025880,Mn:11529966,mn:14381203,pn:16773077,gn:16767673,yn:13468991,bn:16761035,En:14524637,xn:11591910,kn:8388736,red:16711680,An:12357519,Tn:4286945,Pn:9127187,Sn:16416882,Vn:16032864,Rn:3050327,In:16774638,Dn:10506797,Cn:12632256,Xn:8900331,Yn:6970061,Zn:7372944,jn:7372944,Fn:16775930,qn:65407,On:4620980,tan:13808780,Un:32896,Bn:14204888,Hn:16737095,Ln:4251856,$n:15631086,zn:16113331,Qn:16777215,Gn:16119285,Nn:16776960,Wn:10145074};Dt.Jn=function(t,i,n,s){this.x=t||0;this.y=i||0;this.z=n||0;this.w=void 0!==s?s:1};Dt.extend(Dt.Jn.prototype,{set:function(t,i,n,s){this.x=t;this.y=i;this.z=n;this.w=s;return this},_:function(t){this.x=t.x;this.y=t.y;this.z=t.z;this.w=t.w;return this},Kn:function(t,i){var n=Math.cos(t.x/2),s=Math.cos(t.y/2),h=Math.cos(t.z/2),e=Math.sin(t.x/2),r=Math.sin(t.y/2),o=Math.sin(t.z/2);void 0===i||"XYZ"===i?(this.x=e*s*h+n*r*o,this.y=n*r*h-e*s*o,this.z=n*s*o+e*r*h,this.w=n*s*h-e*r*o):"YXZ"===i?(this.x=e*s*h+n*r*o,this.y=n*r*h-e*s*o,this.z=n*s*o-e*r*h,this.w=n*s*h+e*r*o):"ZXY"===i?(this.x=e*s*h-n*r*o,this.y=n*r*h+e*s*o,this.z=n*s*o+e*r*h,this.w=n*s*h-e*r*o):"ZYX"===i?(this.x=e*s*h-n*r*o,this.y=n*r*h+e*s*o,this.z=n*s*o-e*r*h,this.w=n*s*h+e*r*o):"YZX"===i?(this.x=e*s*h+n*r*o,this.y=n*r*h+e*s*o,this.z=n*s*o-e*r*h,this.w=n*s*h-e*r*o):"XZY"===i&&(this.x=e*s*h-n*r*o,this.y=n*r*h-e*s*o,this.z=n*s*o+e*r*h,this.w=n*s*h+e*r*o);return this},_n:function(t,i){var n=i/2,s=Math.sin(n);this.x=t.x*s;this.y=t.y*s;this.z=t.z*s;this.w=Math.cos(n);return this},ts:function(t){var i=t.elements,n=i[0],t=i[4],s=i[8],h=i[1],e=i[5],r=i[9],o=i[2],u=i[6],i=i[10],a=n+e+i;0<a?(n=.5/Math.sqrt(a+1),this.w=.25/n,this.x=(u-r)*n,this.y=(s-o)*n,this.z=(h-t)*n):n>e&&n>i?(n=2*Math.sqrt(1+n-e-i),this.w=(u-r)/n,this.x=.25*n,this.y=(t+h)/n,this.z=(s+o)/n):e>i?(n=2*Math.sqrt(1+e-n-i),this.w=(s-o)/n,this.x=(t+h)/n,this.y=.25*n,this.z=(r+u)/n):(n=2*Math.sqrt(1+i-n-e),this.w=(h-t)/n,this.x=(s+o)/n,this.y=(r+u)/n,this.z=.25*n);return this},inverse:function(){this.ns().normalize();return this},ns:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},ss:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var t=this.length();0===t?(this.z=this.y=this.x=0,this.w=1):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t);return this},multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.hs(t,i)):this.hs(this,t)},hs:function(t,i){var n=t.x,s=t.y,h=t.z,e=t.w,r=i.x,o=i.y,u=i.z,a=i.w;this.x=n*a+e*r+s*u-h*o;this.y=s*a+e*o+h*r-n*u;this.z=h*a+e*u+n*o-s*r;this.w=e*a-n*r-s*o-h*u;return this},es:function(t){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return t.rs(this)},os:function(t,i){var n=this.x,s=this.y,h=this.z,e=this.w,r=e*t.w+n*t.x+s*t.y+h*t.z;0>r?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,r=-r):this._(t);if(1<=r)return this.w=e,this.x=n,this.y=s,this.z=h,this;var o=Math.acos(r),u=Math.sqrt(1-r*r);if(.001>Math.abs(u))return this.w=.5*(e+this.w),this.x=.5*(n+this.x),this.y=.5*(s+this.y),this.z=.5*(h+this.z),this;r=Math.sin((1-i)*o)/u;o=Math.sin(i*o)/u;this.w=e*r+this.w*o;this.x=n*r+this.x*o;this.y=s*r+this.y*o;this.z=h*r+this.z*o;return this},us:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},clone:function(){return new Dt.Jn(this.x,this.y,this.z,this.w)}});Dt.Jn.os=function(t,i,n,s){return n._(t).os(i,s)};Dt.cs=function(t,i){this.x=t||0;this.y=i||0};Dt.extend(Dt.cs.prototype,{set:function(t,i){this.x=t;this.y=i;return this},fs:function(t){this.x=t;return this},ls:function(t){this.y=t;return this},vs:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw Error("index is out of range: "+t)}},ds:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},_:function(t){this.x=t.x;this.y=t.y;return this},add:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ws(t,i);this.x+=t.x;this.y+=t.y;return this},ws:function(t,i){this.x=t.x+i.x;this.y=t.y+i.y;return this},lt:function(t){this.x+=t;this.y+=t;return this},sub:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.Ms(t,i);this.x-=t.x;this.y-=t.y;return this},Ms:function(t,i){this.x=t.x-i.x;this.y=t.y-i.y;return this},vt:function(t){this.x*=t;this.y*=t;return this},ms:function(t){0!==t?(this.x/=t,this.y/=t):this.set(0,0);return this},min:function(t){this.x>t.x&&(this.x=t.x);this.y>t.y&&(this.y=t.y);return this},max:function(t){this.x<t.x&&(this.x=t.x);this.y<t.y&&(this.y=t.y);return this},ps:function(t,i){this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x);this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y);return this},gs:function(){return this.vt(-1)},ys:function(t){return this.x*t.x+this.y*t.y},ss:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.ms(this.length())},bs:function(t){return Math.sqrt(this.Es(t))},Es:function(t){var i=this.x-t.x,t=this.y-t.y;return i*i+t*t},xs:function(t){var i=this.length();0!==i&&t!==i&&this.vt(t/i);return this},dt:function(t,i){this.x+=(t.x-this.x)*i;this.y+=(t.y-this.y)*i;return this},us:function(t){return t.x===this.x&&t.y===this.y},toArray:function(){return[this.x,this.y]},clone:function(){return new Dt.cs(this.x,this.y)}});Dt.ks=function(t,i,n){this.x=t||0;this.y=i||0;this.z=n||0};Dt.extend(Dt.ks.prototype,{set:function(t,i,n){this.x=t;this.y=i;this.z=n;return this},fs:function(t){this.x=t;return this},ls:function(t){this.y=t;return this},As:function(t){this.z=t;return this},vs:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw Error("index is out of range: "+t)}},ds:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},_:function(t){this.x=t.x;this.y=t.y;this.z=t.z;return this},add:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ws(t,i);this.x+=t.x;this.y+=t.y;this.z+=t.z;return this},lt:function(t){this.x+=t;this.y+=t;this.z+=t;return this},ws:function(t,i){this.x=t.x+i.x;this.y=t.y+i.y;this.z=t.z+i.z;return this},sub:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.Ms(t,i);this.x-=t.x;this.y-=t.y;this.z-=t.z;return this},Ms:function(t,i){this.x=t.x-i.x;this.y=t.y-i.y;this.z=t.z-i.z;return this},multiply:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.Ts(t,i);this.x*=t.x;this.y*=t.y;this.z*=t.z;return this},vt:function(t){this.x*=t;this.y*=t;this.z*=t;return this},Ts:function(t,i){this.x=t.x*i.x;this.y=t.y*i.y;this.z=t.z*i.z;return this},Ps:function(t){var i=this.x,n=this.y,s=this.z,t=t.elements;this.x=t[0]*i+t[3]*n+t[6]*s;this.y=t[1]*i+t[4]*n+t[7]*s;this.z=t[2]*i+t[5]*n+t[8]*s;return this},Ss:function(t){var i=this.x,n=this.y,s=this.z,t=t.elements;this.x=t[0]*i+t[4]*n+t[8]*s+t[12];this.y=t[1]*i+t[5]*n+t[9]*s+t[13];this.z=t[2]*i+t[6]*n+t[10]*s+t[14];return this},Vs:function(t){var i=this.x,n=this.y,s=this.z,t=t.elements,h=1/(t[3]*i+t[7]*n+t[11]*s+t[15]);this.x=(t[0]*i+t[4]*n+t[8]*s+t[12])*h;this.y=(t[1]*i+t[5]*n+t[9]*s+t[13])*h;this.z=(t[2]*i+t[6]*n+t[10]*s+t[14])*h;return this},rs:function(t){var i=this.x,n=this.y,s=this.z,h=t.x,e=t.y,r=t.z,t=t.w,o=t*i+e*s-r*n,u=t*n+r*i-h*s,a=t*s+h*n-e*i,i=-h*i-e*n-r*s;this.x=o*t+i*-h+u*-r-a*-e;this.y=u*t+i*-e+a*-h-o*-r;this.z=a*t+i*-r+o*-e-u*-h;return this},Rs:function(){var s=new Dt.Jn;return function(t,i){var n=s.Kn(t,i);this.rs(n);return this}}(),Is:function(){var s=new Dt.Jn;return function(t,i){var n=s._n(t,i);this.rs(n);return this}}(),Ds:function(t){var i=this.x,n=this.y,s=this.z,t=t.elements;this.x=t[0]*i+t[4]*n+t[8]*s;this.y=t[1]*i+t[5]*n+t[9]*s;this.z=t[2]*i+t[6]*n+t[10]*s;this.normalize();return this},Cs:function(t){this.x/=t.x;this.y/=t.y;this.z/=t.z;return this},ms:function(t){0!==t?(this.x/=t,this.y/=t,this.z/=t):this.z=this.y=this.x=0;return this},min:function(t){this.x>t.x&&(this.x=t.x);this.y>t.y&&(this.y=t.y);this.z>t.z&&(this.z=t.z);return this},max:function(t){this.x<t.x&&(this.x=t.x);this.y<t.y&&(this.y=t.y);this.z<t.z&&(this.z=t.z);return this},ps:function(t,i){this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x);this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y);this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z);return this},gs:function(){return this.vt(-1)},ys:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},ss:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Xs:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.ms(this.length())},xs:function(t){var i=this.length();0!==i&&t!==i&&this.vt(t/i);return this},dt:function(t,i){this.x+=(t.x-this.x)*i;this.y+=(t.y-this.y)*i;this.z+=(t.z-this.z)*i;return this},Ys:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.Zs(t,i);var n=this.x,s=this.y,h=this.z;this.x=s*t.z-h*t.y;this.y=h*t.x-n*t.z;this.z=n*t.y-s*t.x;return this},Zs:function(t,i){this.x=t.y*i.z-t.z*i.y;this.y=t.z*i.x-t.x*i.z;this.z=t.x*i.y-t.y*i.x;return this},js:function(){var i=new Dt.ks;return function(t){i._(t).normalize();t=this.ys(i);return this._(i).vt(t)}}(),Fs:function(){var i=new Dt.ks;return function(t){i._(this).js(t);return this.sub(i)}}(),qs:function(){var i=new Dt.ks;return function(t){i._(this).js(t).vt(2);return this.Ms(i,this)}}(),Os:function(t){t=this.ys(t)/(this.length()*t.length());return Math.acos(Dt.Math.ps(t,-1,1))},bs:function(t){return Math.sqrt(this.Es(t))},Es:function(t){var i=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return i*i+n*n+t*t},Us:function(t){this.x=t.elements[12];this.y=t.elements[13];this.z=t.elements[14];return this},Bs:function(t,i){function n(t){return Math.min(Math.max(t,-1),1)}var s=t.elements,h=s[0],e=s[4],r=s[8],o=s[1],u=s[5],a=s[9],c=s[2],f=s[6],s=s[10];void 0===i||"XYZ"===i?(this.y=Math.asin(n(r)),.99999>Math.abs(r)?(this.x=Math.atan2(-a,s),this.z=Math.atan2(-e,h)):(this.x=Math.atan2(f,u),this.z=0)):"YXZ"===i?(this.x=Math.asin(-n(a)),.99999>Math.abs(a)?(this.y=Math.atan2(r,s),this.z=Math.atan2(o,u)):(this.y=Math.atan2(-c,h),this.z=0)):"ZXY"===i?(this.x=Math.asin(n(f)),.99999>Math.abs(f)?(this.y=Math.atan2(-c,s),this.z=Math.atan2(-e,u)):(this.y=0,this.z=Math.atan2(o,h))):"ZYX"===i?(this.y=Math.asin(-n(c)),.99999>Math.abs(c)?(this.x=Math.atan2(f,s),this.z=Math.atan2(o,h)):(this.x=0,this.z=Math.atan2(-e,u))):"YZX"===i?(this.z=Math.asin(n(o)),.99999>Math.abs(o)?(this.x=Math.atan2(-a,u),this.y=Math.atan2(-c,h)):(this.x=0,this.y=Math.atan2(r,s))):"XZY"===i&&(this.z=Math.asin(-n(e)),.99999>Math.abs(e)?(this.x=Math.atan2(f,u),this.y=Math.atan2(r,h)):(this.x=Math.atan2(-a,s),this.y=0));return this},Hs:function(t,i){function n(t){return Math.min(Math.max(t,-1),1)}var s=t.x*t.x,h=t.y*t.y,e=t.z*t.z,r=t.w*t.w;void 0===i||"XYZ"===i?(this.x=Math.atan2(2*(t.x*t.w-t.y*t.z),r-s-h+e),this.y=Math.asin(n(2*(t.x*t.z+t.y*t.w))),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),r+s-h-e)):"YXZ"===i?(this.x=Math.asin(n(2*(t.x*t.w-t.y*t.z))),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),r-s-h+e),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),r-s+h-e)):"ZXY"===i?(this.x=Math.asin(n(2*(t.x*t.w+t.y*t.z))),this.y=Math.atan2(2*(t.y*t.w-t.z*t.x),r-s-h+e),this.z=Math.atan2(2*(t.z*t.w-t.x*t.y),r-s+h-e)):"ZYX"===i?(this.x=Math.atan2(2*(t.x*t.w+t.z*t.y),r-s-h+e),this.y=Math.asin(n(2*(t.y*t.w-t.x*t.z))),this.z=Math.atan2(2*(t.x*t.y+t.z*t.w),r+s-h-e)):"YZX"===i?(this.x=Math.atan2(2*(t.x*t.w-t.z*t.y),r-s+h-e),this.y=Math.atan2(2*(t.y*t.w-t.x*t.z),r+s-h-e),this.z=Math.asin(n(2*(t.x*t.y+t.z*t.w)))):"XZY"===i&&(this.x=Math.atan2(2*(t.x*t.w+t.y*t.z),r-s+h-e),this.y=Math.atan2(2*(t.x*t.z+t.y*t.w),r+s-h-e),this.z=Math.asin(n(2*(t.z*t.w-t.x*t.y))));return this},Ls:function(t){var i=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),t=this.set(t.elements[8],t.elements[9],t.elements[10]).length();this.x=i;this.y=n;this.z=t;return this},us:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new Dt.ks(this.x,this.y,this.z)}});Dt.$s=function(t,i,n,s){this.x=t||0;this.y=i||0;this.z=n||0;this.w=void 0!==s?s:1};Dt.extend(Dt.$s.prototype,{set:function(t,i,n,s){this.x=t;this.y=i;this.z=n;this.w=s;return this},fs:function(t){this.x=t;return this},ls:function(t){this.y=t;return this},As:function(t){this.z=t;return this},zs:function(t){this.w=t;return this},vs:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw Error("index is out of range: "+t)}},ds:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},_:function(t){this.x=t.x;this.y=t.y;this.z=t.z;this.w=void 0!==t.w?t.w:1;return this},add:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.ws(t,i);this.x+=t.x;this.y+=t.y;this.z+=t.z;this.w+=t.w;return this},lt:function(t){this.x+=t;this.y+=t;this.z+=t;this.w+=t;return this},ws:function(t,i){this.x=t.x+i.x;this.y=t.y+i.y;this.z=t.z+i.z;this.w=t.w+i.w;return this},sub:function(t,i){if(void 0!==i)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.Ms(t,i);this.x-=t.x;this.y-=t.y;this.z-=t.z;this.w-=t.w;return this},Ms:function(t,i){this.x=t.x-i.x;this.y=t.y-i.y;this.z=t.z-i.z;this.w=t.w-i.w;return this},vt:function(t){this.x*=t;this.y*=t;this.z*=t;this.w*=t;return this},Ss:function(t){var i=this.x,n=this.y,s=this.z,h=this.w,t=t.elements;this.x=t[0]*i+t[4]*n+t[8]*s+t[12]*h;this.y=t[1]*i+t[5]*n+t[9]*s+t[13]*h;this.z=t[2]*i+t[6]*n+t[10]*s+t[14]*h;this.w=t[3]*i+t[7]*n+t[11]*s+t[15]*h;return this},ms:function(t){0!==t?(this.x/=t,this.y/=t,this.z/=t,this.w/=t):(this.z=this.y=this.x=0,this.w=1);return this},Qs:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);1e-4>i?(this.x=1,this.z=this.y=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i);return this},Gs:function(t){var i,n,s,t=t.elements,h=t[0];s=t[4];var e=t[8],r=t[1],o=t[5],u=t[9];n=t[2];i=t[6];var a=t[10];if(.01>Math.abs(s-r)&&.01>Math.abs(e-n)&&.01>Math.abs(u-i)){if(.1>Math.abs(s+r)&&.1>Math.abs(e+n)&&.1>Math.abs(u+i)&&.1>Math.abs(h+o+a-3))return this.set(1,0,0,0),this;t=Math.PI;h=(h+1)/2;o=(o+1)/2;a=(a+1)/2;s=(s+r)/4;e=(e+n)/4;u=(u+i)/4;h>o&&h>a?.01>h?(i=0,s=n=.707106781):(i=Math.sqrt(h),n=s/i,s=e/i):o>a?.01>o?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(o),i=s/n,s=u/n):.01>a?(n=i=.707106781,s=0):(s=Math.sqrt(a),i=e/s,n=u/s);this.set(i,n,s,t);return this}t=Math.sqrt((i-u)*(i-u)+(e-n)*(e-n)+(r-s)*(r-s));.001>Math.abs(t)&&(t=1);this.x=(i-u)/t;this.y=(e-n)/t;this.z=(r-s)/t;this.w=Math.acos((h+o+a-1)/2);return this},min:function(t){this.x>t.x&&(this.x=t.x);this.y>t.y&&(this.y=t.y);this.z>t.z&&(this.z=t.z);this.w>t.w&&(this.w=t.w);return this},max:function(t){this.x<t.x&&(this.x=t.x);this.y<t.y&&(this.y=t.y);this.z<t.z&&(this.z=t.z);this.w<t.w&&(this.w=t.w);return this},ps:function(t,i){this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x);this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y);this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z);this.w<t.w?this.w=t.w:this.w>i.w&&(this.w=i.w);return this},gs:function(){return this.vt(-1)},ys:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},ss:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},Xs:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.ms(this.length())},xs:function(t){var i=this.length();0!==i&&t!==i&&this.vt(t/i);return this},dt:function(t,i){this.x+=(t.x-this.x)*i;this.y+=(t.y-this.y)*i;this.z+=(t.z-this.z)*i;this.w+=(t.w-this.w)*i;return this},us:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new Dt.$s(this.x,this.y,this.z,this.w)}});Dt.Ns=function(t,i){this.min=void 0!==t?t:new Dt.cs(Infinity,Infinity);this.max=void 0!==i?i:new Dt.cs(-Infinity,-Infinity)};Dt.extend(Dt.Ns.prototype,{set:function(t,i){this.min._(t);this.max._(i);return this},Ws:function(t){if(0<t.length){var i=t[0];this.min._(i);this.max._(i);for(var n=1,s=t.length;n<s;n++)i=t[n],i.x<this.min.x?this.min.x=i.x:i.x>this.max.x&&(this.max.x=i.x),i.y<this.min.y?this.min.y=i.y:i.y>this.max.y&&(this.max.y=i.y)}else this.Js();return this},Ks:function(){var s=new Dt.cs;return function(t,i){var n=s._(i).vt(.5);this.min._(t).sub(n);this.max._(t).add(n);return this}}(),_:function(t){this.min._(t.min);this.max._(t.max);return this},Js:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},_s:function(t){return(t||new Dt.cs).ws(this.min,this.max).vt(.5)},size:function(t){return(t||new Dt.cs).Ms(this.max,this.min)},th:function(t){this.min.min(t);this.max.max(t);return this},ih:function(t){this.min.sub(t);this.max.add(t);return this},nh:function(t){this.min.lt(-t);this.max.lt(t);return this},sh:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},hh:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t){return new Dt.cs((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},eh:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},rh:function(t,i){return(i||new Dt.cs)._(t).ps(this.min,this.max)},oh:function(){var i=new Dt.cs;return function(t){return i._(t).ps(this.min,this.max).sub(t).length()}}(),uh:function(t){this.min.max(t.min);this.max.min(t.max);return this},ah:function(t){this.min.min(t.min);this.max.max(t.max);return this},translate:function(t){this.min.add(t);this.max.add(t);return this},us:function(t){return t.min.us(this.min)&&t.max.us(this.max)},clone:function(){return(new Dt.Ns)._(this)}});Dt.fh=function(t,i){this.min=void 0!==t?t:new Dt.ks(Infinity,Infinity,Infinity);this.max=void 0!==i?i:new Dt.ks(-Infinity,-Infinity,-Infinity)};Dt.extend(Dt.fh.prototype,{set:function(t,i){this.min._(t);this.max._(i);return this},Ws:function(t){if(0<t.length){var i=t[0];this.min._(i);this.max._(i);for(var n=1,s=t.length;n<s;n++)i=t[n],i.x<this.min.x?this.min.x=i.x:i.x>this.max.x&&(this.max.x=i.x),i.y<this.min.y?this.min.y=i.y:i.y>this.max.y&&(this.max.y=i.y),i.z<this.min.z?this.min.z=i.z:i.z>this.max.z&&(this.max.z=i.z)}else this.Js();return this},Ks:function(){var s=new Dt.ks;return function(t,i){var n=s._(i).vt(.5);this.min._(t).sub(n);this.max._(t).add(n);return this}}(),_:function(t){this.min._(t.min);this.max._(t.max);return this},Js:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},_s:function(t){return(t||new Dt.ks).ws(this.min,this.max).vt(.5)},size:function(t){return(t||new Dt.ks).Ms(this.max,this.min)},th:function(t){this.min.min(t);this.max.max(t);return this},ih:function(t){this.min.sub(t);this.max.add(t);return this},nh:function(t){this.min.lt(-t);this.max.lt(t);return this},sh:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},hh:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t){return new Dt.ks((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},eh:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},rh:function(t,i){return(i||new Dt.ks)._(t).ps(this.min,this.max)},oh:function(){var i=new Dt.ks;return function(t){return i._(t).ps(this.min,this.max).sub(t).length()}}(),lh:function(){var i=new Dt.ks;return function(t){t=t||new Dt.vh;t._s=this._s();t.dh=.5*this.size(i).length();return t}}(),uh:function(t){this.min.max(t.min);this.max.min(t.max);return this},ah:function(t){this.min.min(t.min);this.max.max(t.max);return this},Ss:function(){var i=[new Dt.ks,new Dt.ks,new Dt.ks,new Dt.ks,new Dt.ks,new Dt.ks,new Dt.ks,new Dt.ks];return function(t){i[0].set(this.min.x,this.min.y,this.min.z).Ss(t);i[1].set(this.min.x,this.min.y,this.max.z).Ss(t);i[2].set(this.min.x,this.max.y,this.min.z).Ss(t);i[3].set(this.min.x,this.max.y,this.max.z).Ss(t);i[4].set(this.max.x,this.min.y,this.min.z).Ss(t);i[5].set(this.max.x,this.min.y,this.max.z).Ss(t);i[6].set(this.max.x,this.max.y,this.min.z).Ss(t);i[7].set(this.max.x,this.max.y,this.max.z).Ss(t);this.Js();this.Ws(i);return this}}(),translate:function(t){this.min.add(t);this.max.add(t);return this},us:function(t){return t.min.us(this.min)&&t.max.us(this.max)},clone:function(){return(new Dt.fh)._(this)}});Dt.wh=function(t,i,n,s,h,e,r,o,u){this.elements=new Float32Array(9);this.set(void 0!==t?t:1,i||0,n||0,s||0,void 0!==h?h:1,e||0,r||0,o||0,void 0!==u?u:1)};Dt.extend(Dt.wh.prototype,{set:function(t,i,n,s,h,e,r,o,u){var a=this.elements;a[0]=t;a[3]=i;a[6]=n;a[1]=s;a[4]=h;a[7]=e;a[2]=r;a[5]=o;a[8]=u;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},_:function(t){t=t.elements;this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]);return this},es:function(t){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return t.Ps(this)},Mh:function(){var s=new Dt.ks;return function(t){for(var i=0,n=t.length;i<n;i+=3)s.x=t[i],s.y=t[i+1],s.z=t[i+2],s.Ps(this),t[i]=s.x,t[i+1]=s.y,t[i+2]=s.z;return t}}(),vt:function(t){var i=this.elements;i[0]*=t;i[3]*=t;i[6]*=t;i[1]*=t;i[4]*=t;i[7]*=t;i[2]*=t;i[5]*=t;i[8]*=t;return this},mh:function(){var t=this.elements,i=t[0],n=t[1],s=t[2],h=t[3],e=t[4],r=t[5],o=t[6],u=t[7],t=t[8];return i*e*t-i*r*u-n*h*t+n*r*o+s*h*u-s*e*o},ph:function(t,i){var n=t.elements,s=this.elements;s[0]=n[10]*n[5]-n[6]*n[9];s[1]=-n[10]*n[1]+n[2]*n[9];s[2]=n[6]*n[1]-n[2]*n[5];s[3]=-n[10]*n[4]+n[6]*n[8];s[4]=n[10]*n[0]-n[2]*n[8];s[5]=-n[6]*n[0]+n[2]*n[4];s[6]=n[9]*n[4]-n[5]*n[8];s[7]=-n[9]*n[0]+n[1]*n[8];s[8]=n[5]*n[0]-n[1]*n[4];n=n[0]*s[0]+n[1]*s[3]+n[2]*s[6];if(0===n){if(i)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.vt(1/n);return this},gh:function(){var t,i=this.elements;t=i[1];i[1]=i[3];i[3]=t;t=i[2];i[2]=i[6];i[6]=t;t=i[5];i[5]=i[7];i[7]=t;return this},yh:function(t){this.ph(t).gh();return this},bh:function(t){var i=this.elements;t[0]=i[0];t[1]=i[3];t[2]=i[6];t[3]=i[1];t[4]=i[4];t[5]=i[7];t[6]=i[2];t[7]=i[5];t[8]=i[8];return this},clone:function(){var t=this.elements;return new Dt.wh(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}});Dt.Eh=function(t,i,n,s,h,e,r,o,u,a,c,f,l,v,d,w){var M=this.elements=new Float32Array(16);M[0]=void 0!==t?t:1;M[4]=i||0;M[8]=n||0;M[12]=s||0;M[1]=h||0;M[5]=void 0!==e?e:1;M[9]=r||0;M[13]=o||0;M[2]=u||0;M[6]=a||0;M[10]=void 0!==c?c:1;M[14]=f||0;M[3]=l||0;M[7]=v||0;M[11]=d||0;M[15]=void 0!==w?w:1};Dt.extend(Dt.Eh.prototype,{set:function(t,i,n,s,h,e,r,o,u,a,c,f,l,v,d,w){var M=this.elements;M[0]=t;M[4]=i;M[8]=n;M[12]=s;M[1]=h;M[5]=e;M[9]=r;M[13]=o;M[2]=u;M[6]=a;M[10]=c;M[14]=f;M[3]=l;M[7]=v;M[11]=d;M[15]=w;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},_:function(t){t=t.elements;this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]);return this},xh:function(t,i){var n=this.elements,s=t.x,h=t.y,e=t.z,r=Math.cos(s),s=Math.sin(s),o=Math.cos(h),h=Math.sin(h),u=Math.cos(e),e=Math.sin(e);if(void 0===i||"XYZ"===i){var a=r*u,c=r*e,f=s*u,l=s*e;n[0]=o*u;n[4]=-o*e;n[8]=h;n[1]=c+f*h;n[5]=a-l*h;n[9]=-s*o;n[2]=l-a*h;n[6]=f+c*h;n[10]=r*o}else"YXZ"===i?(a=o*u,c=o*e,f=h*u,l=h*e,n[0]=a+l*s,n[4]=f*s-c,n[8]=r*h,n[1]=r*e,n[5]=r*u,n[9]=-s,n[2]=c*s-f,n[6]=l+a*s,n[10]=r*o):"ZXY"===i?(a=o*u,c=o*e,f=h*u,l=h*e,n[0]=a-l*s,n[4]=-r*e,n[8]=f+c*s,n[1]=c+f*s,n[5]=r*u,n[9]=l-a*s,n[2]=-r*h,n[6]=s,n[10]=r*o):"ZYX"===i?(a=r*u,c=r*e,f=s*u,l=s*e,n[0]=o*u,n[4]=f*h-c,n[8]=a*h+l,n[1]=o*e,n[5]=l*h+a,n[9]=c*h-f,n[2]=-h,n[6]=s*o,n[10]=r*o):"YZX"===i?(a=r*o,c=r*h,f=s*o,l=s*h,n[0]=o*u,n[4]=l-a*e,n[8]=f*e+c,n[1]=e,n[5]=r*u,n[9]=-s*u,n[2]=-h*u,n[6]=c*e+f,n[10]=a-l*e):"XZY"===i&&(a=r*o,c=r*h,f=s*o,l=s*h,n[0]=o*u,n[4]=-e,n[8]=h*u,n[1]=a*e+l,n[5]=r*u,n[9]=c*e-f,n[2]=f*e-c,n[6]=s*u,n[10]=l*e+a);return this},kh:function(t){var i=this.elements,n=t.x,s=t.y,h=t.z,e=t.w,r=n+n,o=s+s,u=h+h,t=n*r,a=n*o,n=n*u,c=s*o,s=s*u,h=h*u,r=e*r,o=e*o,e=e*u;i[0]=1-(c+h);i[4]=a-e;i[8]=n+o;i[1]=a+e;i[5]=1-(t+h);i[9]=s-r;i[2]=n-o;i[6]=s+r;i[10]=1-(t+c);return this},Ah:function(){var h=new Dt.ks,e=new Dt.ks,r=new Dt.ks;return function(t,i,n){var s=this.elements;r.Ms(t,i).normalize();0===r.length()&&(r.z=1);h.Zs(n,r).normalize();0===h.length()&&(r.x+=1e-4,h.Zs(n,r).normalize());e.Zs(r,h);s[0]=h.x;s[4]=e.x;s[8]=r.x;s[1]=h.y;s[5]=e.y;s[9]=r.y;s[2]=h.z;s[6]=e.z;s[10]=r.z;return this}}(),multiply:function(t,i){return void 0!==i?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.Th(t,i)):this.Th(this,t)},Th:function(t,i){var n=t.elements,s=i.elements,h=this.elements,e=n[0],r=n[4],o=n[8],u=n[12],a=n[1],c=n[5],f=n[9],l=n[13],v=n[2],d=n[6],w=n[10],M=n[14],m=n[3],p=n[7],g=n[11],n=n[15],y=s[0],b=s[4],E=s[8],x=s[12],k=s[1],A=s[5],T=s[9],P=s[13],S=s[2],V=s[6],R=s[10],I=s[14],D=s[3],C=s[7],X=s[11],s=s[15];h[0]=e*y+r*k+o*S+u*D;h[4]=e*b+r*A+o*V+u*C;h[8]=e*E+r*T+o*R+u*X;h[12]=e*x+r*P+o*I+u*s;h[1]=a*y+c*k+f*S+l*D;h[5]=a*b+c*A+f*V+l*C;h[9]=a*E+c*T+f*R+l*X;h[13]=a*x+c*P+f*I+l*s;h[2]=v*y+d*k+w*S+M*D;h[6]=v*b+d*A+w*V+M*C;h[10]=v*E+d*T+w*R+M*X;h[14]=v*x+d*P+w*I+M*s;h[3]=m*y+p*k+g*S+n*D;h[7]=m*b+p*A+g*V+n*C;h[11]=m*E+p*T+g*R+n*X;h[15]=m*x+p*P+g*I+n*s;return this},Ph:function(t,i,n){var s=this.elements;this.Th(t,i);n[0]=s[0];n[1]=s[1];n[2]=s[2];n[3]=s[3];n[4]=s[4];n[5]=s[5];n[6]=s[6];n[7]=s[7];n[8]=s[8];n[9]=s[9];n[10]=s[10];n[11]=s[11];n[12]=s[12];n[13]=s[13];n[14]=s[14];n[15]=s[15];return this},vt:function(t){var i=this.elements;i[0]*=t;i[4]*=t;i[8]*=t;i[12]*=t;i[1]*=t;i[5]*=t;i[9]*=t;i[13]*=t;i[2]*=t;i[6]*=t;i[10]*=t;i[14]*=t;i[3]*=t;i[7]*=t;i[11]*=t;i[15]*=t;return this},es:function(t){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return t.Vs(this)},Sh:function(t){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.Ss(this)},Mh:function(){var s=new Dt.ks;return function(t){for(var i=0,n=t.length;i<n;i+=3)s.x=t[i],s.y=t[i+1],s.z=t[i+2],s.Vs(this),t[i]=s.x,t[i+1]=s.y,t[i+2]=s.z;return t}}(),Vh:function(t){var i=this.elements,n=t.x,s=t.y,h=t.z;t.x=n*i[0]+s*i[4]+h*i[8];t.y=n*i[1]+s*i[5]+h*i[9];t.z=n*i[2]+s*i[6]+h*i[10];t.normalize();return t},Rh:function(t){var i=this.elements,n=new Dt.$s;n.x=i[0]*t.x+i[4]*t.y+i[8]*t.z+i[12]*t.w;n.y=i[1]*t.x+i[5]*t.y+i[9]*t.z+i[13]*t.w;n.z=i[2]*t.x+i[6]*t.y+i[10]*t.z+i[14]*t.w;n.w=t.w?i[3]*t.x+i[7]*t.y+i[11]*t.z+i[15]*t.w:1;return n},mh:function(){var t=this.elements,i=t[0],n=t[4],s=t[8],h=t[12],e=t[1],r=t[5],o=t[9],u=t[13],a=t[2],c=t[6],f=t[10],l=t[14];return t[3]*(+h*o*c-s*u*c-h*r*f+n*u*f+s*r*l-n*o*l)+t[7]*(+i*o*l-i*u*f+h*e*f-s*e*l+s*u*a-h*o*a)+t[11]*(+i*u*c-i*r*l-h*e*c+n*e*l+h*r*a-n*u*a)+t[15]*(-s*r*a-i*o*c+i*r*f+s*e*c-n*e*f+n*o*a)},gh:function(){var t=this.elements,i;i=t[1];t[1]=t[4];t[4]=i;i=t[2];t[2]=t[8];t[8]=i;i=t[6];t[6]=t[9];t[9]=i;i=t[3];t[3]=t[12];t[12]=i;i=t[7];t[7]=t[13];t[13]=i;i=t[11];t[11]=t[14];t[14]=i;return this},Ih:function(t){var i=this.elements;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return t},Dh:function(t,i){var n=this.elements;t[i]=n[0];t[i+1]=n[1];t[i+2]=n[2];t[i+3]=n[3];t[i+4]=n[4];t[i+5]=n[5];t[i+6]=n[6];t[i+7]=n[7];t[i+8]=n[8];t[i+9]=n[9];t[i+10]=n[10];t[i+11]=n[11];t[i+12]=n[12];t[i+13]=n[13];t[i+14]=n[14];t[i+15]=n[15];return t},Ch:function(){var i=new Dt.ks;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return i.set(t[12],t[13],t[14])}}(),setPosition:function(t){var i=this.elements;i[12]=t.x;i[13]=t.y;i[14]=t.z;return this},ph:function(t,i){var n=this.elements,s=t.elements,h=s[0],e=s[4],r=s[8],o=s[12],u=s[1],a=s[5],c=s[9],f=s[13],l=s[2],v=s[6],d=s[10],w=s[14],M=s[3],m=s[7],p=s[11],g=s[15];n[0]=c*w*m-f*d*m+f*v*p-a*w*p-c*v*g+a*d*g;n[4]=o*d*m-r*w*m-o*v*p+e*w*p+r*v*g-e*d*g;n[8]=r*f*m-o*c*m+o*a*p-e*f*p-r*a*g+e*c*g;n[12]=o*c*v-r*f*v-o*a*d+e*f*d+r*a*w-e*c*w;n[1]=f*d*M-c*w*M-f*l*p+u*w*p+c*l*g-u*d*g;n[5]=r*w*M-o*d*M+o*l*p-h*w*p-r*l*g+h*d*g;n[9]=o*c*M-r*f*M-o*u*p+h*f*p+r*u*g-h*c*g;n[13]=r*f*l-o*c*l+o*u*d-h*f*d-r*u*w+h*c*w;n[2]=a*w*M-f*v*M+f*l*m-u*w*m-a*l*g+u*v*g;n[6]=o*v*M-e*w*M-o*l*m+h*w*m+e*l*g-h*v*g;n[10]=e*f*M-o*a*M+o*u*m-h*f*m-e*u*g+h*a*g;n[14]=o*a*l-e*f*l-o*u*v+h*f*v+e*u*w-h*a*w;n[3]=c*v*M-a*d*M-c*l*m+u*d*m+a*l*p-u*v*p;n[7]=e*d*M-r*v*M+r*l*m-h*d*m-e*l*p+h*v*p;n[11]=r*a*M-e*c*M-r*u*m+h*c*m+e*u*p-h*a*p;n[15]=e*c*l-r*a*l+r*u*v-h*c*v-e*u*d+h*a*d;n=s[0]*n[0]+s[1]*n[4]+s[2]*n[8]+s[3]*n[12];if(0==n){if(i)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.vt(1/n);return this},Xh:function(){var h=new Dt.Eh,e=new Dt.Eh;return function(t,i,n){var s=this.elements;h.identity();h.kh(i);e.Yh(n.x,n.y,n.z);this.Th(h,e);s[12]=t.x;s[13]=t.y;s[14]=t.z;return this}}(),Zh:function(){var h=new Dt.ks,e=new Dt.ks,r=new Dt.ks,o=new Dt.Eh;return function(t,i,n){var s=this.elements;h.set(s[0],s[1],s[2]);e.set(s[4],s[5],s[6]);r.set(s[8],s[9],s[10]);t=t instanceof Dt.ks?t:new Dt.ks;i=i instanceof Dt.Jn?i:new Dt.Jn;n=n instanceof Dt.ks?n:new Dt.ks;n.x=h.length();n.y=e.length();n.z=r.length();t.x=s[12];t.y=s[13];t.z=s[14];o._(this);o.elements[0]/=n.x;o.elements[1]/=n.x;o.elements[2]/=n.x;o.elements[4]/=n.y;o.elements[5]/=n.y;o.elements[6]/=n.y;o.elements[8]/=n.z;o.elements[9]/=n.z;o.elements[10]/=n.z;i.ts(o);return[t,i,n]}}(),jh:function(t){var i=this.elements,t=t.elements;i[12]=t[12];i[13]=t[13];i[14]=t[14];return this},Fh:function(){var e=new Dt.ks;return function(t){var i=this.elements,t=t.elements,n=1/e.set(t[0],t[1],t[2]).length(),s=1/e.set(t[4],t[5],t[6]).length(),h=1/e.set(t[8],t[9],t[10]).length();i[0]=t[0]*n;i[1]=t[1]*n;i[2]=t[2]*n;i[4]=t[4]*s;i[5]=t[5]*s;i[6]=t[6]*s;i[8]=t[8]*h;i[9]=t[9]*h;i[10]=t[10]*h;return this}}(),translate:function(t){var i=this.elements,n=t.x,s=t.y,t=t.z;i[12]=i[0]*n+i[4]*s+i[8]*t+i[12];i[13]=i[1]*n+i[5]*s+i[9]*t+i[13];i[14]=i[2]*n+i[6]*s+i[10]*t+i[14];i[15]=i[3]*n+i[7]*s+i[11]*t+i[15];return this},qh:function(t){var i=this.elements,n=i[4],s=i[5],h=i[6],e=i[7],r=i[8],o=i[9],u=i[10],a=i[11],c=Math.cos(t),t=Math.sin(t);i[4]=c*n+t*r;i[5]=c*s+t*o;i[6]=c*h+t*u;i[7]=c*e+t*a;i[8]=c*r-t*n;i[9]=c*o-t*s;i[10]=c*u-t*h;i[11]=c*a-t*e;return this},Oh:function(t){var i=this.elements,n=i[0],s=i[1],h=i[2],e=i[3],r=i[8],o=i[9],u=i[10],a=i[11],c=Math.cos(t),t=Math.sin(t);i[0]=c*n-t*r;i[1]=c*s-t*o;i[2]=c*h-t*u;i[3]=c*e-t*a;i[8]=c*r+t*n;i[9]=c*o+t*s;i[10]=c*u+t*h;i[11]=c*a+t*e;return this},Uh:function(t){var i=this.elements,n=i[0],s=i[1],h=i[2],e=i[3],r=i[4],o=i[5],u=i[6],a=i[7],c=Math.cos(t),t=Math.sin(t);i[0]=c*n+t*r;i[1]=c*s+t*o;i[2]=c*h+t*u;i[3]=c*e+t*a;i[4]=c*r-t*n;i[5]=c*o-t*s;i[6]=c*u-t*h;i[7]=c*a-t*e;return this},Bh:function(t,i){var n=this.elements;if(1===t.x&&0===t.y&&0===t.z)return this.qh(i);if(0===t.x&&1===t.y&&0===t.z)return this.Oh(i);if(0===t.x&&0===t.y&&1===t.z)return this.Uh(i);var s=t.x,h=t.y,e=t.z,r=Math.sqrt(s*s+h*h+e*e),s=s/r,h=h/r,e=e/r,r=s*s,o=h*h,u=e*e,a=Math.cos(i),c=Math.sin(i),f=1-a,l=s*h*f,v=s*e*f,f=h*e*f,s=s*c,d=h*c,c=e*c,e=r+(1-r)*a,r=l+c,h=v-d,l=l-c,o=o+(1-o)*a,c=f+s,v=v+d,f=f-s,u=u+(1-u)*a,a=n[0],s=n[1],d=n[2],w=n[3],M=n[4],m=n[5],p=n[6],g=n[7],y=n[8],b=n[9],E=n[10],x=n[11];n[0]=e*a+r*M+h*y;n[1]=e*s+r*m+h*b;n[2]=e*d+r*p+h*E;n[3]=e*w+r*g+h*x;n[4]=l*a+o*M+c*y;n[5]=l*s+o*m+c*b;n[6]=l*d+o*p+c*E;n[7]=l*w+o*g+c*x;n[8]=v*a+f*M+u*y;n[9]=v*s+f*m+u*b;n[10]=v*d+f*p+u*E;n[11]=v*w+f*g+u*x;return this},scale:function(t){var i=this.elements,n=t.x,s=t.y,t=t.z;i[0]*=n;i[4]*=s;i[8]*=t;i[1]*=n;i[5]*=s;i[9]*=t;i[2]*=n;i[6]*=s;i[10]*=t;i[3]*=n;i[7]*=s;i[11]*=t;return this},Hh:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],Math.max(t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10])))},Lh:function(t,i,n){this.set(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1);return this},$h:function(t){var i=Math.cos(t),t=Math.sin(t);this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1);return this},zh:function(t){var i=Math.cos(t),t=Math.sin(t);this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1);return this},Qh:function(t){var i=Math.cos(t),t=Math.sin(t);this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1);return this},Gh:function(t,i){var n=Math.cos(i),s=Math.sin(i),h=1-n,e=t.x,r=t.y,o=t.z,u=h*e,a=h*r;this.set(u*e+n,u*r-s*o,u*o+s*r,0,u*r+s*o,a*r+n,a*o-s*e,0,u*o-s*r,a*o+s*e,h*o*o+n,0,0,0,0,1);return this},Yh:function(t,i,n){this.set(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1);return this},Nh:function(t,i,n,s,h,e){var r=this.elements;r[0]=2*h/(i-t);r[4]=0;r[8]=(i+t)/(i-t);r[12]=0;r[1]=0;r[5]=2*h/(s-n);r[9]=(s+n)/(s-n);r[13]=0;r[2]=0;r[6]=0;r[10]=-(e+h)/(e-h);r[14]=-2*e*h/(e-h);r[3]=0;r[7]=0;r[11]=-1;r[15]=0;return this},Wh:function(t,i,n,s){var t=n*Math.tan(Dt.Math.Jh(.5*t)),h=-t;return this.Nh(h*i,t*i,h,t,n,s)},Kh:function(t,i,n,s,h,e){var r=this.elements,o=i-t,u=n-s,a=e-h;r[0]=2/o;r[4]=0;r[8]=0;r[12]=-((i+t)/o);r[1]=0;r[5]=2/u;r[9]=0;r[13]=-((n+s)/u);r[2]=0;r[6]=0;r[10]=-2/a;r[14]=-((e+h)/a);r[3]=0;r[7]=0;r[11]=0;r[15]=1;return this},clone:function(){var t=this.elements;return new Dt.Eh(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}});Dt._h=function(t,i,n,s,h,e){this.te=[void 0!==t?t:new Dt.ie,void 0!==i?i:new Dt.ie,void 0!==n?n:new Dt.ie,void 0!==s?s:new Dt.ie,void 0!==h?h:new Dt.ie,void 0!==e?e:new Dt.ie]};Dt.extend(Dt._h.prototype,{set:function(t,i,n,s,h,e){var r=this.te;r[0]._(t);r[1]._(i);r[2]._(n);r[3]._(s);r[4]._(h);r[5]._(e);return this},_:function(t){for(var i=this.te,n=0;6>n;n++)i[n]._(t.te[n]);return this},ne:function(t){var i=this.te,n=t.elements,t=n[0],s=n[1],h=n[2],e=n[3],r=n[4],o=n[5],u=n[6],a=n[7],c=n[8],f=n[9],l=n[10],v=n[11],d=n[12],w=n[13],M=n[14],n=n[15];i[0].se(e-t,a-r,v-c,n-d).normalize();i[1].se(e+t,a+r,v+c,n+d).normalize();i[2].se(e+s,a+o,v+f,n+w).normalize();i[3].se(e-s,a-o,v-f,n-w).normalize();i[4].se(e-h,a-u,v-l,n-M).normalize();i[5].se(e+h,a+u,v+l,n+M).normalize();return this},he:function(){var s=new Dt.ks;return function(t){var i=t.ee,n=this.te,t=-t.oe.re.dh*i.Hh();s.Us(i);for(i=0;6>i;i++)if(n[i].oh(s)<t)return!1;return!0}}(),ue:function(t){for(var i=this.te,n=t._s,t=-t.dh,s=0;6>s;s++)if(i[s].oh(n)<t)return!1;return!0},sh:function(t){for(var i=this.te,n=0;6>n;n++)if(0>i[n].oh(t))return!1;return!0},clone:function(){return(new Dt._h)._(this)}});Dt.ie=function(t,i){this.ae=void 0!==t?t:new Dt.ks(1,0,0);this.ce=void 0!==i?i:0};Dt.extend(Dt.ie.prototype,{set:function(t,i){this.ae._(t);this.ce=i;return this},se:function(t,i,n,s){this.ae.set(t,i,n);this.ce=s;return this},fe:function(t,i){this.ae._(t);this.ce=-i.ys(this.ae);return this},le:function(){var s=new Dt.ks,h=new Dt.ks;return function(t,i,n){i=s.Ms(n,i).Ys(h.Ms(t,i)).normalize();this.fe(i,t);return this}}(),_:function(t){this.ae._(t.ae);this.ce=t.ce;return this},normalize:function(){var t=1/this.ae.length();this.ae.vt(t);this.ce*=t;return this},gs:function(){this.ce*=-1;this.ae.gs();return this},oh:function(t){return this.ae.ys(t)+this.ce},ve:function(t){return this.oh(t._s)-t.dh},de:function(t,i){return this.we(t,i).sub(t).gs()},we:function(t,i){var n=this.oh(t);return(i||new Dt.ks)._(this.ae).vt(n)},Me:function(t){var i=this.oh(t.start),t=this.oh(t.end);return 0>i&&0<t||0>t&&0<i},me:function(){var e=new Dt.ks;return function(t,i){var n=i||new Dt.ks,s=t.delta(e),h=this.ae.ys(s);if(0==h){if(0==this.oh(t.start))return n._(t.start)}else return h=-(t.start.ys(this.ae)+this.ce)/h,0>h||1<h?void 0:n._(s).vt(h).add(t.start)}}(),pe:function(t){return(t||new Dt.ks)._(this.ae).vt(-this.ce)},Ss:function(){var h=new Dt.ks,e=new Dt.ks;return function(t,i){var i=i||(new Dt.wh).ph(t).gh(),n=h._(this.ae).Ps(i),s=this.pe(e);s.Ss(t);this.fe(n,s);return this}}(),translate:function(t){this.ce-=t.ys(this.ae);return this},us:function(t){return t.ae.us(this.ae)&&t.ce==this.ce},clone:function(){return(new Dt.ie)._(this)}});Dt.Math={ps:function(t,i,n){return t<i?i:t>n?n:t},ge:function(t,i){return t<i?i:t},ye:function(t,i,n,s,h){return s+(t-i)*(h-s)/(n-i)},be:function(t,i,n){if(t<=i)return 0;if(t>=n)return 1;t=(t-i)/(n-i);return t*t*(3-2*t)},Ee:function(t,i,n){if(t<=i)return 0;if(t>=n)return 1;t=(t-i)/(n-i);return t*t*t*(t*(6*t-15)+10)},xe:function(){return(65280*Math.random()+255*Math.random())/65535},ke:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},Ae:function(t,i){return t+Math.random()*(i-t)},Te:function(t){return t*(.5-Math.random())},sign:function(t){return 0>t?-1:0<t?1:0},Jh:function(){var i=Math.PI/180;return function(t){return t*i}}(),Pe:function(){var i=180/Math.PI;return function(t){return t*i}}()};Dt.Se=function(){var h={};this.addEventListener=function(t,i){void 0===h[t]&&(h[t]=[]);-1===h[t].indexOf(i)&&h[t].push(i)};this.removeEventListener=function(t,i){var n=h[t].indexOf(i);-1!==n&&h[t].splice(n,1)};this.dispatchEvent=function(t){var i=h[t.type];if(void 0!==i){t.target=this;for(var n=0,s=i.length;n<s;n++)i[n].call(this,t)}}};Dt.Ve=function(){this.id=Dt.Re++;this.name="";this.properties={};this.parent=void 0;this.children=[];this.Ie=new Dt.ks(0,1,0);this.position=new Dt.ks;this.rotation=new Dt.ks;this.De=Dt.Ve.Ce;this.scale=new Dt.ks(1,1,1);this.Xe=null;this.Ye=!0;this.matrix=new Dt.Eh;this.ee=new Dt.Eh;this.Ze=new Dt.Eh;this.je=this.Fe=!0;this.quaternion=new Dt.Jn;this.qe=!1;this.visible=!0;this.Oe=this.Ue=!1;this.Be=!0;this.He=new Dt.ks};Dt.Ve.prototype={constructor:Dt.Ve,Le:function(t){this.matrix.Th(t,this.matrix);this.scale.Ls(this.matrix);t=(new Dt.Eh).Fh(this.matrix);this.rotation.Bs(t,this.De);this.position.Us(this.matrix)},translate:function(t,i){this.matrix.Vh(i);this.position.add(i.vt(t))},$e:function(t){this.translate(t,this.He.set(1,0,0))},ze:function(t){this.translate(t,this.He.set(0,1,0))},Qe:function(t){this.translate(t,this.He.set(0,0,1))},Ge:function(t){return t.Ss(this.ee)},Ne:function(t){return t.Ss(Dt.Ve.We.ph(this.ee))},Ah:function(t){this.matrix.Ah(t,this.position,this.Ie);this.Ye&&(!1===this.qe?this.rotation.Bs(this.matrix,this.De):this.quaternion._(this.matrix.Zh()[1]))},add:function(t){if(t===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(t instanceof Dt.Ve){void 0!==t.parent&&t.parent.remove(t);t.parent=this;this.children.push(t);for(var i=this;void 0!==i.parent;)i=i.parent;void 0!==i&&i instanceof Dt.Je&&i.Ke(t)}},remove:function(t){var i=this.children.indexOf(t);if(-1!==i){t.parent=void 0;this.children.splice(i,1);for(i=this;void 0!==i.parent;)i=i.parent;void 0!==i&&i instanceof Dt.Je&&i._e(t)}},tr:function(t){t(this);for(var i=0,n=this.children.length;i<n;i++)this.children[i].tr(t)},ir:function(t,i){for(var n=0,s=this.children.length;n<s;n++){var h=this.children[n];if(h.name===t||!0===i&&(h=h.ir(t,i),void 0!==h))return h}},nr:function(t){void 0===t&&(t=[]);Array.prototype.push.apply(t,this.children);for(var i=0,n=this.children.length;i<n;i++)this.children[i].nr(t);return t},sr:function(){this.matrix.setPosition(this.position);!1===this.qe?this.matrix.xh(this.rotation,this.De):this.matrix.kh(this.quaternion);(1!==this.scale.x||1!==this.scale.y||1!==this.scale.z)&&this.matrix.scale(this.scale);this.je=!0},hr:function(t){!0===this.Fe&&this.sr();if(!0===this.je||!0===t)void 0===this.parent?this.ee._(this.matrix):this.ee.Th(this.parent.ee,this.matrix),this.je=!1,t=!0;for(var i=0,n=this.children.length;i<n;i++)this.children[i].hr(t)},clone:function(t){void 0===t&&(t=new Dt.Ve);t.name=this.name;t.Ie._(this.Ie);t.position._(this.position);t.rotation instanceof Dt.ks&&t.rotation._(this.rotation);t.De=this.De;t.scale._(this.scale);t.Xe=this.Xe;t.Ye=this.Ye;t.matrix._(this.matrix);t.ee._(this.ee);t.Ze._(this.Ze);t.Fe=this.Fe;t.je=this.je;t.quaternion._(this.quaternion);t.qe=this.qe;t.visible=this.visible;t.Ue=this.Ue;t.Oe=this.Oe;t.Be=this.Be;for(var i=0;i<this.children.length;i++)t.add(this.children[i].clone());return t}};Dt.Ve.We=new Dt.Eh;Dt.Ve.Ce="XYZ";Dt.Re=0;Dt.er=function(){function b(){if(T===n){var t=new Dt.rr;i.push(t);n++;T++;return t}return i[T++]}function E(){if(S===s){var t=new Dt.ur;V.push(t);s++;S++;return t}return V[S++]}function x(t,i){return i.z-t.z}function k(t,i){var n=0,s=1,h=t.z+t.w,e=i.z+i.w,r=-t.z+t.w,o=-i.z+i.w;if(0<=h&&0<=e&&0<=r&&0<=o)return!0;if(0>h&&0>e||0>r&&0>o)return!1;0>h?n=Math.max(n,h/(h-e)):0>e&&(s=Math.min(s,h/(h-e)));0>r?n=Math.max(n,r/(r-o)):0>o&&(s=Math.min(s,r/(r-o)));if(s<n)return!1;t.dt(i,n);i.dt(t,1-s);return!0}var A,T,i=[],n=0,P,S,V=[],s=0,R,I,D=[],C=0,X,Y=[],Z=0,j,F,q=[],O=0,U,B,H=[],L=0,$={ar:[],cr:[],lr:[],elements:[]},z=new Dt.ks,Q=new Dt.$s,G=new Dt.fh(new Dt.ks(-1,-1,-1),new Dt.ks(1,1,1)),N=new Dt.fh,W=Array(3),J=Array(4),K=new Dt.Eh,_=new Dt.Eh,tt,it=new Dt.Eh,nt=new Dt.wh,st=new Dt.wh,ht=new Dt.ks,et=new Dt._h,rt=new Dt.$s,ot=new Dt.$s;this.vr=function(t,i){i.dr.ph(i.ee);_.Th(i.wr,i.dr);return t.Vs(_)};this.Mr=function(t,i){i.mr.ph(i.wr);_.Th(i.ee,i.mr);return t.Vs(_)};this.pr=function(t,i){t.z=-1;var n=new Dt.ks(t.x,t.y,1);this.Mr(t,i);this.Mr(n,i);n.sub(t).normalize();return new Dt.gr(t,n)};this.yr=function(t,i,n,s){var h=!1,e,r,o,u,a,c,f,l,v,d,w,M,m;B=F=X=I=0;$.elements.length=0;t.hr();void 0===i.parent&&i.hr();K._(i.dr.ph(i.ee));_.Th(i.wr,K);st.ph(K);st.gh();et.ne(_);T=0;$.ar.length=0;$.cr.length=0;$.lr.length=0;var p=function(t){for(var i=0,n=t.children.length;i<n;i++){var s=t.children[i];if(!1!==s.visible){if(s instanceof Dt.br)$.lr.push(s);else if(s instanceof Dt.Er||s instanceof Dt.xr){if(!1===s.Be||!0===et.he(s))A=b(),A.object=s,null!==s.Xe?A.z=s.Xe:(z.Us(s.ee),z.Vs(_),A.z=z.z),$.ar.push(A)}else s instanceof Dt.kr?(A=b(),A.object=s,null!==s.Xe?A.z=s.Xe:(z.Us(s.ee),z.Vs(_),A.z=z.z),$.cr.push(A)):(A=b(),A.object=s,null!==s.Xe?A.z=s.Xe:(z.Us(s.ee),z.Vs(_),A.z=z.z),$.ar.push(A));p(s)}}};p(t);!0===n&&$.ar.sort(x);t=0;for(n=$.ar.length;t<n;t++)if(l=$.ar[t].object,tt=l.ee,S=0,l instanceof Dt.Er){v=l.oe;o=v.Ar;d=v.Tr;v=v.Pr;nt.ph(tt);nt.gh();M=l.Sr instanceof Dt.Vr;m=!0===M?l.Sr:null;e=0;for(r=o.length;e<r;e++)P=E(),P.Rr._(o[e]).Ss(tt),P.Ir._(P.Rr).Ss(_),P.Ir.x/=P.Ir.w,P.Ir.y/=P.Ir.w,P.Ir.z/=P.Ir.w,P.visible=!(-1>P.Ir.x||1<P.Ir.x||-1>P.Ir.y||1<P.Ir.y||-1>P.Ir.z||1<P.Ir.z);o=0;for(e=d.length;o<e;o++){r=d[o];var g=!0===M?m.Dr[r.Cr]:l.Sr;if(void 0!==g){c=g.Xr;if(r instanceof Dt.Yr)if(u=V[r.a],a=V[r.b],f=V[r.c],W[0]=u.Ir,W[1]=a.Ir,W[2]=f.Ir,!0===u.visible||!0===a.visible||!0===f.visible||G.eh(N.Ws(W)))if(h=0>(f.Ir.x-u.Ir.x)*(a.Ir.y-u.Ir.y)-(f.Ir.y-u.Ir.y)*(a.Ir.x-u.Ir.x),c===Dt.T||h===(c===Dt.k))I===C?(w=new Dt.Zr,D.push(w),C++,I++,R=w):R=D[I++],R.jr._(u),R.Fr._(a),R.qr._(f);else continue;else continue;else if(r instanceof Dt.Or)if(u=V[r.a],a=V[r.b],f=V[r.c],w=V[r.d],J[0]=u.Ir,J[1]=a.Ir,J[2]=f.Ir,J[3]=w.Ir,!0===u.visible||!0===a.visible||!0===f.visible||!0===w.visible||G.eh(N.Ws(J)))if(h=0>(w.Ir.x-u.Ir.x)*(a.Ir.y-u.Ir.y)-(w.Ir.y-u.Ir.y)*(a.Ir.x-u.Ir.x)||0>(a.Ir.x-f.Ir.x)*(w.Ir.y-f.Ir.y)-(a.Ir.y-f.Ir.y)*(w.Ir.x-f.Ir.x),c===Dt.T||h===(c===Dt.k)){if(X===Z){var y=new Dt.Ur;Y.push(y);Z++;X++;R=y}else R=Y[X++];R.jr._(u);R.Fr._(a);R.qr._(f);R.Br._(w)}else continue;else continue;R.Hr._(r.ae);!1===h&&(c===Dt.A||c===Dt.T)&&R.Hr.gs();R.Hr.Ps(nt).normalize();R.Lr._(R.Hr).Ps(st);R.$r._(r.zr).Ss(tt);f=r.Qr;u=0;for(a=f.length;u<a;u++)w=R.Gr[u],w._(f[u]),!1===h&&(c===Dt.A||c===Dt.T)&&w.gs(),w.Ps(nt).normalize(),R.Nr[u]._(w).Ps(st);R.Wr=f.length;u=0;for(a=v.length;u<a;u++)if(w=v[u][o],void 0!==w){c=0;for(f=w.length;c<f;c++)R.Jr[u][c]=w[c]}R.color=r.color;R.Sr=g;ht._(R.$r).Vs(_);R.z=ht.z;$.elements.push(R)}}}else if(l instanceof Dt.xr){it.Th(_,tt);o=l.oe.Ar;u=E();u.Ir._(o[0]).Ss(it);d=l.type===Dt.Kr?2:1;e=1;for(r=o.length;e<r;e++)u=E(),u.Ir._(o[e]).Ss(it),0<(e+1)%d||(a=V[S-2],rt._(u.Ir),ot._(a.Ir),!0===k(rt,ot)&&(rt.vt(1/rt.w),ot.vt(1/ot.w),F===O?(v=new Dt._r,q.push(v),O++,F++,j=v):j=q[F++],j.jr.Ir._(rt),j.Fr.Ir._(ot),j.z=Math.max(rt.z,ot.z),j.Sr=l.Sr,$.elements.push(j)))}t=0;for(n=$.cr.length;t<n;t++)l=$.cr[t].object,tt=l.ee,l instanceof Dt.kr&&(Q.set(tt.elements[12],tt.elements[13],tt.elements[14],1),Q.Ss(_),Q.z/=Q.w,0<Q.z&&1>Q.z&&(B===L?(h=new Dt.to,H.push(h),L++,B++,U=h):U=H[B++],U.object=l,U.x=Q.x/Q.w,U.y=Q.y/Q.w,U.z=Q.z,U.rotation=l.rotation.z,U.scale.x=l.scale.x*Math.abs(U.x-(Q.x+i.wr.elements[0])/(Q.w+i.wr.elements[12])),U.scale.y=l.scale.y*Math.abs(U.y-(Q.y+i.wr.elements[5])/(Q.w+i.wr.elements[13])),U.Sr=l.Sr,$.elements.push(U)));!0===s&&$.elements.sort(x);return $}};Dt.io=function(){Dt.Se.call(this);this.id=Dt.no++;this.name="";this.Ar=[];this.so=[];this.ho=[];this.Tr=[];this.eo=[[]];this.Pr=[[]];this.ro=[];this.oo=[];this.uo=[];this.ao=[];this.co=[];this.fo=[];this.re=this.lo=null;this.vo=!1;this["do"]=!0;this.wo=this.Mo=this.mo=this.po=this.yo=this.bo=this.Eo=this.xo=!1};Dt.no=0;Dt.ko=function(){Dt.Ve.call(this);this.dr=new Dt.Eh;this.wr=new Dt.Eh;this.mr=new Dt.Eh};Dt.ko.prototype=Object.create(Dt.Ve.prototype);Dt.ko.prototype.Ah=function(t){this.matrix.Ah(this.position,t,this.Ie);!0===this.Ye&&(!1===this.qe?this.rotation.Bs(this.matrix,this.De):this.quaternion._(this.matrix.Zh()[1]))};Dt.Ao=function(t,i,n,s){Dt.ko.call(this);this.To=void 0!==t?t:50;this.Po=void 0!==i?i:1;this.near=void 0!==n?n:.1;this.So=void 0!==s?s:2e3;this.Vo()};Dt.Ao.prototype=Object.create(Dt.ko.prototype);Dt.Ao.prototype.Ro=function(t,i){void 0===i&&(i=24);this.To=2*Dt.Math.Pe(Math.atan(i/(2*t)));this.Vo()};Dt.Ao.prototype.Io=function(t,i,n,s,h,e){this.Do=t;this.Co=i;this.x=n;this.y=s;this.width=h;this.height=e;this.Vo()};Dt.Ao.prototype.Vo=function(){if(this.Do){var t=this.Do/this.Co,i=Math.tan(Dt.Math.Jh(.5*this.To))*this.near,n=-i,s=t*n,t=Math.abs(t*i-s),n=Math.abs(i-n);this.wr.Nh(s+this.x*t/this.Do,s+(this.x+this.width)*t/this.Do,i-(this.y+this.height)*n/this.Co,i-this.y*n/this.Co,this.near,this.So)}else this.wr.Wh(this.To,this.Po,this.near,this.So)};Dt.br=function(t){Dt.Ve.call(this);this.color=new Dt.H(t)};Dt.br.prototype=Object.create(Dt.Ve.prototype);Dt.Xo=function(){Dt.Se.call(this);this.id=Dt.Yo++;this.name="";this.Xr=Dt.k;this.opacity=1;this.Zo=!1;this.jo=Dt.R;this.Fo=Dt.X;this.qo=Dt.Y;this.blendEquation=Dt.C;this.Oo=this.Uo=!0;this.polygonOffset=!1;this.Bo=this.Ho=this.Lo=0;this.$o=!1;this.zo=this.visible=!0};Dt.Xo.prototype.Qo=function(t){if(void 0!==t)for(var i in t){var n=t[i];if(void 0===n)console.warn("THREE.Material: '"+i+"' parameter is undefined.");else if(i in this){var s=this[i];s instanceof Dt.H&&n instanceof Dt.H?s._(n):s instanceof Dt.H?s.set(n):s instanceof Dt.ks&&n instanceof Dt.ks?s._(n):this[i]=n}}};Dt.Xo.prototype.clone=function(t){void 0===t&&(t=new Dt.Xo);t.name=this.name;t.Xr=this.Xr;t.opacity=this.opacity;t.Zo=this.Zo;t.jo=this.jo;t.Fo=this.Fo;t.qo=this.qo;t.blendEquation=this.blendEquation;t.Uo=this.Uo;t.Oo=this.Oo;t.polygonOffset=this.polygonOffset;t.Lo=this.Lo;t.Ho=this.Ho;t.Bo=this.Bo;t.$o=this.$o;t.visible=this.visible;return t};Dt.Xo.prototype.Go=function(){this.dispatchEvent({type:"dispose"})};Dt.Yo=0;Dt.No=function(t){Dt.Xo.call(this);this.color=new Dt.H(16777215);this.map=null;this.size=1;this.Wo=!0;this.Jo=!1;this.Ko=!0;this.Qo(t)};Dt.No.prototype=Object.create(Dt.Xo.prototype);Dt.No.prototype.clone=function(){var t=new Dt.No;Dt.Xo.prototype.clone.call(this,t);t.color._(this.color);t.map=this.map;t.size=this.size;t.Wo=this.Wo;t.Jo=this.Jo;t.Ko=this.Ko;return t};Dt._o=function(t){Dt.Xo.call(this);this.color=new Dt.H(16777215);this.tu=function(){};this.Qo(t)};Dt._o.prototype=Object.create(Dt.Xo.prototype);Dt._o.prototype.clone=function(){var t=new Dt._o;Dt.Xo.prototype.clone.call(this,t);t.color._(this.color);t.tu=this.tu;return t};Dt.kr=function(t){Dt.Ve.call(this);this.Sr=t};Dt.kr.prototype=Object.create(Dt.Ve.prototype);Dt.kr.prototype.clone=function(t){void 0===t&&(t=new Dt.kr(this.Sr));Dt.Ve.prototype.clone.call(this,t);return t};Dt.xr=function(t,i,n){Dt.Ve.call(this);this.oe=t;this.Sr=void 0!==i?i:new Dt.iu({color:16777215*Math.random()});this.type=void 0!==n?n:Dt.nu;this.oe&&(this.oe.re||this.oe.su())};Dt.nu=0;Dt.Kr=1;Dt.xr.prototype=Object.create(Dt.Ve.prototype);Dt.xr.prototype.clone=function(t){void 0===t&&(t=new Dt.xr(this.oe,this.Sr,this.type));Dt.Ve.prototype.clone.call(this,t);return t};Dt.Er=function(t,i){Dt.Ve.call(this);this.oe=t;this.Sr=void 0!==i?i:new Dt.hu({color:16777215*Math.random(),eu:!0});void 0!==this.oe&&(null===this.oe.re&&this.oe.su(),this.ru())};Dt.Er.prototype=Object.create(Dt.Ve.prototype);Dt.Er.prototype.ru=function(){if(0<this.oe.ro.length){this.ou=-1;this.uu=[];this.au=[];this.cu={};for(var t=0,i=this.oe.ro.length;t<i;t++)this.au.push(0),this.cu[this.oe.ro[t].name]=t}};Dt.Er.prototype.fu=function(t){if(void 0!==this.cu[t])return this.cu[t];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0.");return 0};Dt.Er.prototype.clone=function(t){void 0===t&&(t=new Dt.Er(this.oe,this.Sr));Dt.Ve.prototype.clone.call(this,t);return t};Dt.Je=function(){Dt.Ve.call(this);this.lu=this.Ko=null;this.Fe=!1;this.vu=[];this.du=[];this.wu=[];this.Mu=[]};Dt.Je.prototype=Object.create(Dt.Ve.prototype);Dt.Je.prototype.Ke=function(t){if(t instanceof Dt.br)-1===this.du.indexOf(t)&&this.du.push(t),t.target&&void 0===t.target.parent&&this.add(t.target);else if(!(t instanceof Dt.ko)&&-1===this.vu.indexOf(t)){this.vu.push(t);this.wu.push(t);var i=this.Mu.indexOf(t);-1!==i&&this.Mu.splice(i,1)}for(i=0;i<t.children.length;i++)this.Ke(t.children[i])};Dt.Je.prototype._e=function(t){if(t instanceof Dt.br){var i=this.du.indexOf(t);-1!==i&&this.du.splice(i,1)}else t instanceof Dt.ko||(i=this.vu.indexOf(t),-1!==i&&(this.vu.splice(i,1),this.Mu.push(t),i=this.wu.indexOf(t),-1!==i&&this.wu.splice(i,1)));for(i=0;i<t.children.length;i++)this._e(t.children[i])};Dt.mu=function(t){function x(t){o!==t&&(o=q.globalAlpha=t)}function k(t){O!==t&&(t===Dt.R?q.globalCompositeOperation="source-over":t===Dt.I?q.globalCompositeOperation="lighter":t===Dt.D&&(q.globalCompositeOperation="darker"),O=t)}function A(t){c!==t&&(c=q.lineWidth=t)}function T(t){f!==t&&(f=q.lineCap=t)}function P(t){l!==t&&(l=q.lineJoin=t)}function S(t){u!==t&&(u=q.strokeStyle=t)}function V(t){a!==t&&(a=q.fillStyle=t)}function R(t,i){if(v!==t||d!==i)q.setLineDash([t,i]),v=t,d=i}console.log("THREE.CanvasRenderer",Dt.g);var I=Dt.Math.be,t=t||{},D=this,C,X,Y,Z=new Dt.er,n=void 0!==t.canvas?t.canvas:document.createElement("canvas"),s,h,j,F,q=n.getContext("2d"),e=new Dt.H(0),r=0,o=1,O=0,u=null,a=null,c=null,f=null,l=null,v=null,d=0,U,B,H,L,$=new Dt.ur,z=new Dt.ur,Q,G,N,W,J,K,_,tt,it,nt,st,ht,et=new Dt.H,rt=new Dt.H,ot=new Dt.H,ut=new Dt.H,at=new Dt.H,ct=new Dt.H,ft=new Dt.H,lt=new Dt.H,vt={},dt={},wt,Mt,mt,i,w,M,m,p,g,y,pt=new Dt.Ns,gt=new Dt.Ns,yt=new Dt.Ns,bt=!1,Et=new Dt.H,xt=new Dt.H,kt=new Dt.H,At=new Dt.ks,Tt,Pt,St,Vt,Rt,It,b=16;Tt=document.createElement("canvas");Tt.width=Tt.height=2;Pt=Tt.getContext("2d");Pt.fillStyle="rgba(0,0,0,1)";Pt.fillRect(0,0,2,2);St=Pt.getImageData(0,0,2,2);Vt=St.data;Rt=document.createElement("canvas");Rt.width=Rt.height=b;It=Rt.getContext("2d");It.translate(-b/2,-b/2);It.scale(b,b);b--;void 0===q.setLineDash&&(q.setLineDash=void 0!==q.mozDash?function(t){q.mozDash=null!==t[0]?t:null}:function(){});this.pu=n;this.devicePixelRatio=void 0!==t.devicePixelRatio?t.devicePixelRatio:void 0!==window.devicePixelRatio?window.devicePixelRatio:1;this.gu=this.yu=this.bu=!0;this.info={Eu:{Ar:0,Tr:0}};this.xu=function(){};this.ku=function(){};this.Au=function(t,i){s=t*this.devicePixelRatio;h=i*this.devicePixelRatio;j=Math.floor(s/2);F=Math.floor(h/2);n.width=s;n.height=h;n.style.width=t+"px";n.style.height=i+"px";pt.set(new Dt.cs(-j,-F),new Dt.cs(j,F));gt.set(new Dt.cs(-j,-F),new Dt.cs(j,F));o=1;O=0;l=f=c=a=u=null};this.Tu=function(t,i){e._(t);r=void 0!==i?i:1;gt.set(new Dt.cs(-j,-F),new Dt.cs(j,F))};this.Pu=function(t,i){e.$(t);r=void 0!==i?i:1;gt.set(new Dt.cs(-j,-F),new Dt.cs(j,F))};this.Su=function(){return 0};this.clear=function(){q.setTransform(1,0,0,-1,j,F);!1===gt.empty()&&(gt.uh(pt),gt.nh(2),1>r&&q.clearRect(gt.min.x|0,gt.min.y|0,gt.max.x-gt.min.x|0,gt.max.y-gt.min.y|0),0<r&&(k(Dt.R),x(1),V("rgba("+Math.floor(255*e.r)+","+Math.floor(255*e.L)+","+Math.floor(255*e.b)+","+r+")"),q.fillRect(gt.min.x|0,gt.min.y|0,gt.max.x-gt.min.x|0,gt.max.y-gt.min.y|0)),gt.Js())};this.Eu=function(t,i){function n(t,i,n){for(var s=0,h=Y.length;s<h;s++){var e=Y[s];lt._(e.color);if(e instanceof Dt.Vu){var r=At.Us(e.ee).normalize(),o=i.ys(r);0>=o||(o*=e.Ru,n.add(lt.vt(o)))}else e instanceof Dt.Iu&&(r=At.Us(e.ee),o=i.ys(At.Ms(r,t).normalize()),0>=o||(o*=0==e.Du?1:1-Math.min(t.bs(r)/e.Du,1),0!=o&&(o*=e.Ru,n.add(lt.vt(o)))))}}function s(t,i,n,s,h,e){q.beginPath();q.moveTo(t,i);q.lineTo(n,s);q.lineTo(h,e);q.closePath()}function h(t,i,n,s,h,e,r,o){q.beginPath();q.moveTo(t,i);q.lineTo(n,s);q.lineTo(h,e);q.lineTo(r,o);q.closePath()}function e(t,i,n,s){A(i);T(n);P(s);S(t.at());q.stroke();yt.nh(2*i)}function m(t){V(t.at());q.fill()}function r(t,i,n,s,h,e,r,o,u,a,c,f,l){if(!(l instanceof Dt.Cu||void 0===l.Xu||0==l.Xu.width)){if(!0===l.zo){var v=l.Yu==Dt.Z,d=l.Zu==Dt.Z;vt[l.id]=q.createPattern(l.Xu,!0===v&&!0===d?"repeat":!0===v&&!1===d?"repeat-x":!1===v&&!0===d?"repeat-y":"no-repeat");l.zo=!1}void 0===vt[l.id]?V("rgba(0,0,0,1)"):V(vt[l.id]);var v=l.offset.x/l.repeat.x,d=l.offset.y/l.repeat.y,w=l.Xu.width*l.repeat.x,M=l.Xu.height*l.repeat.y,r=(r+v)*w,o=(1-o+d)*M,n=n-t,s=s-i,h=h-t,e=e-i,u=(u+v)*w-r,a=(1-a+d)*M-o,c=(c+v)*w-r,f=(1-f+d)*M-o,v=u*f-c*a;0===v?(void 0===dt[l.id]&&(i=document.createElement("canvas"),i.width=l.Xu.width,i.height=l.Xu.height,i=i.getContext("2d"),i.drawImage(l.Xu,0,0),dt[l.id]=i.getImageData(0,0,l.Xu.width,l.Xu.height).data),i=dt[l.id],r=4*(Math.floor(r)+Math.floor(o)*l.Xu.width),et.N(i[r]/255,i[r+1]/255,i[r+2]/255),m(et)):(v=1/v,l=(f*n-a*h)*v,a=(f*s-a*e)*v,n=(u*h-c*n)*v,s=(u*e-c*s)*v,t=t-l*r-n*o,r=i-a*r-s*o,q.save(),q.transform(l,a,n,s,t,r),q.fill(),q.restore())}}function o(t,i,n,s,h,e,r,o,u,a,c,f,l){var v,d;v=l.width-1;d=l.height-1;r*=v;o*=d;n-=t;s-=i;h-=t;e-=i;u=u*v-r;a=a*d-o;c=c*v-r;f=f*d-o;d=1/(u*f-c*a);v=(f*n-a*h)*d;a=(f*s-a*e)*d;n=(u*h-c*n)*d;s=(u*e-c*s)*d;t=t-v*r-n*o;i=i-a*r-s*o;q.save();q.transform(v,a,n,s,t,i);q.clip();q.drawImage(l,0,0);q.restore()}function u(t,i,n,s){Vt[0]=255*t.r|0;Vt[1]=255*t.L|0;Vt[2]=255*t.b|0;Vt[4]=255*i.r|0;Vt[5]=255*i.L|0;Vt[6]=255*i.b|0;Vt[8]=255*n.r|0;Vt[9]=255*n.L|0;Vt[10]=255*n.b|0;Vt[12]=255*s.r|0;Vt[13]=255*s.L|0;Vt[14]=255*s.b|0;Pt.putImageData(St,0,0);It.drawImage(Tt,0,0);return Rt}function a(t,i){var n=i.x-t.x,s=i.y-t.y,h=n*n+s*s;0!==h&&(h=1/Math.sqrt(h),n*=h,s*=h,i.x+=n,i.y+=s,t.x-=n,t.y-=s)}if(!1===i instanceof Dt.ko)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.bu&&this.clear();q.setTransform(1,0,0,-1,j,F);D.info.Eu.Ar=0;D.info.Eu.Tr=0;C=Z.yr(t,i,this.yu,this.gu);X=C.elements;Y=C.lr;bt=0<Y.length;if(!0===bt){Et.N(0,0,0);xt.N(0,0,0);kt.N(0,0,0);for(var c=0,f=Y.length;c<f;c++){var l=Y[c],v=l.color;l instanceof Dt.ju?Et.add(v):l instanceof Dt.Vu?xt.add(v):l instanceof Dt.Iu&&kt.add(v)}}c=0;for(f=X.length;c<f;c++){var d=X[c],l=d.Sr;if(!(void 0===l||!1===l.visible)){yt.Js();if(d instanceof Dt.to){U=d;U.x*=j;U.y*=F;var v=U,w=d;x(l.opacity);k(l.jo);var M=void 0,p=void 0,g=void 0,y=void 0,b=d=void 0,E=void 0;l instanceof Dt.No?null===l.map?(g=w.object.scale.x,y=w.object.scale.y,g*=w.scale.x*j,y*=w.scale.y*F,yt.min.set(v.x-g,v.y-y),yt.max.set(v.x+g,v.y+y),!1!==pt.eh(yt)&&(V(l.color.at()),q.save(),q.translate(v.x,v.y),q.rotate(-w.rotation),q.scale(g,y),q.fillRect(-1,-1,2,2),q.restore())):(d=l.map.Xu,b=d.width>>1,E=d.height>>1,g=w.scale.x*j,y=w.scale.y*F,M=g*b,p=y*E,yt.min.set(v.x-M,v.y-p),yt.max.set(v.x+M,v.y+p),!1!==pt.eh(yt)&&(q.save(),q.translate(v.x,v.y),q.rotate(-w.rotation),q.scale(g,-y),q.translate(-b,-E),q.drawImage(d,0,0),q.restore())):l instanceof Dt._o&&(M=w.scale.x*j,p=w.scale.y*F,yt.min.set(v.x-M,v.y-p),yt.max.set(v.x+M,v.y+p),!1!==pt.eh(yt)&&(S(l.color.at()),V(l.color.at()),q.save(),q.translate(v.x,v.y),q.rotate(-w.rotation),q.scale(M,p),l.tu(q),q.restore()))}else if(d instanceof Dt._r)U=d.jr,B=d.Fr,U.Ir.x*=j,U.Ir.y*=F,B.Ir.x*=j,B.Ir.y*=F,yt.Ws([U.Ir,B.Ir]),!0===pt.eh(yt)&&(v=U,w=B,x(l.opacity),k(l.jo),q.beginPath(),q.moveTo(v.Ir.x,v.Ir.y),q.lineTo(w.Ir.x,w.Ir.y),l instanceof Dt.iu?(A(l.Fu),T(l.qu),P(l.Ou),S(l.color.at()),R(null,null),q.stroke(),yt.nh(2*l.Fu)):l instanceof Dt.Uu&&(A(l.Fu),T(l.qu),P(l.Ou),S(l.color.at()),R(l.Bu,l.Hu),q.stroke(),yt.nh(2*l.Fu)));else if(d instanceof Dt.Zr){U=d.jr;B=d.Fr;H=d.qr;if(-1>U.Ir.z||1<U.Ir.z)continue;if(-1>B.Ir.z||1<B.Ir.z)continue;if(-1>H.Ir.z||1<H.Ir.z)continue;U.Ir.x*=j;U.Ir.y*=F;B.Ir.x*=j;B.Ir.y*=F;H.Ir.x*=j;H.Ir.y*=F;!0===l.$o&&(a(U.Ir,B.Ir),a(B.Ir,H.Ir),a(H.Ir,U.Ir));yt.Ws([U.Ir,B.Ir,H.Ir]);O(U,B,H,0,1,2,d,l)}else if(d instanceof Dt.Ur){U=d.jr;B=d.Fr;H=d.qr;L=d.Br;if(-1>U.Ir.z||1<U.Ir.z)continue;if(-1>B.Ir.z||1<B.Ir.z)continue;if(-1>H.Ir.z||1<H.Ir.z)continue;if(-1>L.Ir.z||1<L.Ir.z)continue;U.Ir.x*=j;U.Ir.y*=F;B.Ir.x*=j;B.Ir.y*=F;H.Ir.x*=j;H.Ir.y*=F;L.Ir.x*=j;L.Ir.y*=F;$.Ir._(B.Ir);z.Ir._(L.Ir);!0===l.$o&&(a(U.Ir,B.Ir),a(B.Ir,L.Ir),a(L.Ir,U.Ir),a(H.Ir,$.Ir),a(H.Ir,z.Ir));yt.Ws([U.Ir,B.Ir,H.Ir,L.Ir]);v=U;w=B;M=H;p=L;g=$;y=z;D.info.Eu.Ar+=4;D.info.Eu.Tr++;x(l.opacity);k(l.jo);void 0!==l.map&&null!==l.map||void 0!==l.Lu&&null!==l.Lu?(O(v,w,p,0,1,3,d,l),O(g,M,y,1,2,3,d,l)):(Q=v.Ir.x,G=v.Ir.y,N=w.Ir.x,W=w.Ir.y,J=M.Ir.x,K=M.Ir.y,_=p.Ir.x,tt=p.Ir.y,it=g.Ir.x,nt=g.Ir.y,st=y.Ir.x,ht=y.Ir.y,l instanceof Dt.$u||l instanceof Dt.zu?(ct._(l.color),ft._(l.Qu),l.Jo===Dt.V&&ct.multiply(d.color),!0===bt?!1===l.eu&&l.Gu==Dt.S&&4==d.Wr?(rt._(Et),ot._(Et),ut._(Et),at._(Et),n(d.jr.Rr,d.Gr[0],rt),n(d.Fr.Rr,d.Gr[1],ot),n(d.Br.Rr,d.Gr[3],ut),n(d.qr.Rr,d.Gr[2],at),rt.multiply(ct).add(ft),ot.multiply(ct).add(ft),ut.multiply(ct).add(ft),at.multiply(ct).add(ft),mt=u(rt,ot,ut,at),s(Q,G,N,W,_,tt),o(Q,G,N,W,_,tt,0,0,1,0,0,1,mt),s(it,nt,J,K,st,ht),o(it,nt,J,K,st,ht,1,0,1,1,0,1,mt)):(et._(Et),n(d.$r,d.Hr,et),et.multiply(ct).add(ft),h(Q,G,N,W,J,K,_,tt),!0===l.eu?e(et,l.Nu,l.Wu,l.Ju):m(et)):(et.ft(ct,ft),h(Q,G,N,W,J,K,_,tt),!0===l.eu?e(et,l.Nu,l.Wu,l.Ju):m(et))):l instanceof Dt.hu?(et._(l.color),l.Jo===Dt.V&&et.multiply(d.color),h(Q,G,N,W,J,K,_,tt),!0===l.eu?e(et,l.Nu,l.Wu,l.Ju):m(et)):l instanceof Dt.Ku?(v=void 0,l.Gu==Dt.P?(v=d.Lr,et.N(v.x,v.y,v.z).vt(.5).lt(.5),h(Q,G,N,W,J,K,_,tt),!0===l.eu?e(et,l.Nu,l.Wu,l.Ju):m(et)):l.Gu==Dt.S&&(v=d.Nr[0],rt.N(v.x,v.y,v.z).vt(.5).lt(.5),v=d.Nr[1],ot.N(v.x,v.y,v.z).vt(.5).lt(.5),v=d.Nr[3],ut.N(v.x,v.y,v.z).vt(.5).lt(.5),v=d.Nr[2],at.N(v.x,v.y,v.z).vt(.5).lt(.5),mt=u(rt,ot,ut,at),s(Q,G,N,W,_,tt),o(Q,G,N,W,_,tt,0,0,1,0,0,1,mt),s(it,nt,J,K,st,ht),o(it,nt,J,K,st,ht,1,0,1,1,0,1,mt))):l instanceof Dt._u&&(wt=i.near,Mt=i.So,rt.r=rt.L=rt.b=1-I(v.Ir.z*v.Ir.w,wt,Mt),ot.r=ot.L=ot.b=1-I(w.Ir.z*w.Ir.w,wt,Mt),ut.r=ut.L=ut.b=1-I(p.Ir.z*p.Ir.w,wt,Mt),at.r=at.L=at.b=1-I(M.Ir.z*M.Ir.w,wt,Mt),mt=u(rt,ot,ut,at),s(Q,G,N,W,_,tt),o(Q,G,N,W,_,tt,0,0,1,0,0,1,mt),s(it,nt,J,K,st,ht),o(it,nt,J,K,st,ht,1,0,1,1,0,1,mt)))}gt.ah(yt)}}q.setTransform(1,0,0,1,0,0)}}};Dt.ta=function(t,i,n){Dt.Se.call(this);this.width=t;this.height=i;n=n||{};this.Yu=void 0!==n.Yu?n.Yu:Dt.j;this.Zu=void 0!==n.Zu?n.Zu:Dt.j;this.ia=void 0!==n.ia?n.ia:Dt.F;this.na=void 0!==n.na?n.na:Dt.q;this.sa=void 0!==n.sa?n.sa:1;this.offset=new Dt.cs(0,0);this.repeat=new Dt.cs(1,1);this.format=void 0!==n.format?n.format:Dt.B;this.type=void 0!==n.type?n.type:Dt.O;this.ha=void 0!==n.ha?n.ha:!0;this.ea=void 0!==n.ea?n.ea:!0;this.ra=!0;this.oa=null};Dt.ta.prototype.clone=function(){var t=new Dt.ta(this.width,this.height);t.Yu=this.Yu;t.Zu=this.Zu;t.ia=this.ia;t.na=this.na;t.sa=this.sa;t.offset._(this.offset);t.repeat._(this.repeat);t.format=this.format;t.type=this.type;t.ha=this.ha;t.ea=this.ea;t.ra=this.ra;t.oa=this.oa;return t};Dt.ta.prototype.Go=function(){this.dispatchEvent({type:"dispose"})};Dt.ur=function(){this.Rr=new Dt.ks;this.Ir=new Dt.$s;this.visible=!0};Dt.ur.prototype._=function(t){this.Rr._(t.Rr);this.Ir._(t.Ir)};Dt.Zr=function(){this.jr=new Dt.ur;this.Fr=new Dt.ur;this.qr=new Dt.ur;this.$r=new Dt.ks;this.Hr=new Dt.ks;this.Lr=new Dt.ks;this.Wr=0;this.Gr=[new Dt.ks,new Dt.ks,new Dt.ks];this.Nr=[new Dt.ks,new Dt.ks,new Dt.ks];this.Sr=this.color=null;this.Jr=[[]];this.z=null};Dt.rr=function(){this.z=this.object=null};Dt.to=function(){this.rotation=this.z=this.y=this.x=this.object=null;this.scale=new Dt.cs;this.Sr=null};Dt._r=function(){this.z=null;this.jr=new Dt.ur;this.Fr=new Dt.ur;this.Sr=null};Dt.ua=function(t,i){"undefined"!==typeof t&&(Dt.io.call(this),t=t instanceof Array?t:[t],this.aa=t[t.length-1].ca(),this.fa(t,i),this.la(),this.va())};Dt.ua.prototype=Object.create(Dt.io.prototype);var e=100,r=30,o=30;var u;var a,c,f;var l,m,s=0;var h=85,p=-342;var g=window.innerWidth/2;var y=window.innerHeight/2;b();T();function b(){u=document.createElement("div");document.getElementById("welcome-section").appendChild(u);a=new Dt.Ao(120,window.innerWidth/window.innerHeight,1,1e4);a.position.z=1e3;c=new Dt.Je;l=new Array;var i=Math.PI*2;var t=new Dt._o({color:14803425,tu:function(t){t.beginPath();t.arc(0,0,.6,0,i,true);t.fill()}});var n=0;for(var s=0;s<r;s++){for(var h=0;h<o;h++){m=l[n++]=new Dt.kr(t);m.position.x=s*e-r*e/2;m.position.z=h*e-o*e/2;c.add(m)}}f=new Dt.mu;f.Au(window.innerWidth,window.innerHeight);u.appendChild(f.pu);document.body.addEventListener("mousemove",x,false);document.getElementById("welcome-section").addEventListener("touchstart",k,false);document.getElementById("welcome-section").addEventListener("touchmove",A,false);window.addEventListener("resize",E,false)}function E(){g=window.innerWidth/2;y=window.innerHeight/2;a.Po=window.innerWidth/window.innerHeight;a.Vo();f.Au(window.innerWidth,window.innerHeight)}function x(t){h=t.clientX-g;p=t.clientY-y}function k(t){if(t.touches.length===1){t.preventDefault();h=t.touches[0].pageX-g;p=t.touches[0].pageY-y}}function A(t){if(t.touches.length===1){t.preventDefault();h=t.touches[0].pageX-g;p=t.touches[0].pageY-y}}function T(){requestAnimationFrame(T);P()}function P(){a.position.x+=(h-a.position.x)*.05;a.position.y+=(-p*.5-a.position.y)*.05;a.Ah(c.position);var t=0;for(var i=0;i<r;i++){for(var n=0;n<o;n++){m=l[t++];m.position.y=Math.sin((i+s)*.3)*50+Math.sin((n+s)*.5)*50;m.scale.x=m.scale.y=(Math.sin((i+s)*.3)+1)*2+(Math.sin((n+s)*.5)+1)*2}}f.Eu(c,a);s+=.05}
